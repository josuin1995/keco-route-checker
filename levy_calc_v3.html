<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>íê¸°ë¬¼ì²˜ë¶„ë¶€ë‹´ê¸ˆ ì‚¬ì „ê³„ì‚° Â· ì¬í™œìš© ì•ˆë‚´</title>
<style>
  :root { --gap: 10px; --radius: 12px; --muted:#6b7280; --shadow: 0 10px 20px rgba(0,0,0,.08); }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; margin: 0; padding: 20px; background:#f8fafc; color:#111; }
  .wrap { max-width: 1040px; margin:0 auto; }
  h1 { margin:0 0 10px 0; font-size:22px; }
  .card { background:#fff; border:1px solid #e5e7eb; border-radius: var(--radius); padding:14px; box-shadow: var(--shadow); margin-bottom:12px; }
  .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
  label { display:block; font-weight:600; margin-top:10px; }
  input, select { padding:8px 10px; border:1px solid #d1d5db; border-radius:8px; width:100%; box-sizing:border-box; }
  .grid { display:grid; gap:12px; }
  .grid-2 { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
  .grid-3 { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
  .muted { color: var(--muted); font-size:12px; }
  .note { font-size:12px; color:#475569; }
  .result { font-size:20px; font-weight:800; }
  .tag { display:inline-block; padding:4px 8px; border-radius:999px; background:#f1f5f9; border:1px solid #e2e8f0; font-size:12px; margin-right:6px; }
  .btn { padding:10px 14px; border-radius:10px; border:1px solid #e5e7eb; background:#111; color:#fff; cursor:pointer; }
  .btn:active { transform: translateY(1px); }
  .btn-wide { display:flex; align-items:center; gap:10px; width:100%; padding:12px 16px; border-radius:12px;
    background: linear-gradient(135deg, #3b82f6, #7c3aed); color:#fff; font-weight:800; text-decoration:none;
    box-shadow: 0 10px 20px rgba(99,102,241,.28); border:0; justify-content:center; }
  .btn-wide:hover { filter: brightness(0.98); }
  .btn-wide .ico { font-size:14px; opacity:.95; }
  .section-title { display:flex; align-items:center; gap:8px; font-size:18px; font-weight:800; margin:0 0 8px 0; }
  .hl { background: linear-gradient(transparent 70%, #e0f7f1 0); border-radius:6px; padding:0 2px; }
</style>
</head>
<body>
  <div class="wrap">
    <h1>íê¸°ë¬¼ì²˜ë¶„ë¶€ë‹´ê¸ˆ ì‚¬ì „ê³„ì‚° Â· ì¬í™œìš© ì•ˆë‚´ <span class="muted">(IPCCÂ·IOÂ·ETS ë°˜ì˜)</span></h1>

    <!-- A. ê¸°ë³¸ ì¡°ê±´ -->
    <div class="card">
      <div class="section-title">A. ê¸°ë³¸ ì¡°ê±´</div>
      <div class="grid grid-2">
        <div>
          <label for="wasteType">íê¸°ë¬¼ ìœ í˜•</label>
          <select id="wasteType">
            <option value="ì‚¬ì—…ì¥íê¸°ë¬¼">ì‚¬ì—…ì¥íê¸°ë¬¼</option>
            <option value="ê±´ì„¤íê¸°ë¬¼">ê±´ì„¤íê¸°ë¬¼</option>
          </select>
        </div>
        <div id="wasteCharWrap">
          <label for="wasteChar">íê¸°ë¬¼ íŠ¹ì„± <span class="muted">(ì‚¬ì—…ì¥íê¸°ë¬¼ë§Œ í•´ë‹¹)</span></label>
          <select id="wasteChar">
            <option value="ê°€ì—°ì„±">ê°€ì—°ì„±</option>
            <option value="ë¶ˆì—°ì„±">ë¶ˆì—°ì„±</option>
          </select>
        </div>
        <div>
          <label for="treatment">ì²˜ë¦¬ ë°©ì‹</label>
          <select id="treatment">
            <option value="ì†Œê°">ì†Œê°</option>
            <option value="ë§¤ë¦½">ë§¤ë¦½</option>
          </select>
        </div>
        <div>
          <label for="disposalYear">ì²˜ë¶„ë…„ë„</label>
          <select id="disposalYear"></select>
        </div>
      </div>
      <div class="note" style="margin-top:8px;">
        â€» ë³¸ ë²„ì „ì˜ ì˜¨ì‹¤ê°€ìŠ¤ ì ˆê°ëŸ‰ì€ <span class="hl">ë™ì•„ì‹œì•„ MSW í‰ê· ì¡°ì„± ê°€ì¤‘ ë°°ì¶œê³„ìˆ˜(0.207451 kgCOâ‚‚/kg)</span>ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
        ì²˜ë¦¬ë°©ì‹Â·ì„¸ë¶€ ì¸ì(íšŒìˆ˜ìœ¨ ë“±)ë³„ ìƒì„¸ ê³„ìˆ˜ëŠ” ë‹¤ìŒ ì—…ë°ì´íŠ¸ì— ë°˜ì˜ ì˜ˆì •ì…ë‹ˆë‹¤.
      </div>
    </div>

    <!-- B. ë¹„ìš©Â·ì§€í‘œ ì…ë ¥ -->
    <div class="card">
      <div class="section-title">B. ë¹„ìš©Â·ì§€í‘œ ì…ë ¥</div>
      <div class="grid grid-3">
        <div>
          <label for="wasteAmount">ë°°ì¶œëŸ‰(kg)</label>
          <input id="wasteAmount" type="number" min="0" step="1" placeholder="ì˜ˆ: 1000">
        </div>
        <div>
          <label for="unitCostKRW">ì²˜ë¦¬/ì¬í™œìš© ë‹¨ê°€ (ì›/í†¤) <span class="muted">(ê¸°ë³¸ 150,000)</span></label>
          <input id="unitCostKRW" type="number" min="0" step="1000" placeholder="ì˜ˆ: 150000">
        </div>
        <div>
          <label for="empCoef">ê³ ìš©ìœ ë°œê³„ìˆ˜ (ëª…/10ì–µ ì›) <span class="muted">(ê¸°ë³¸ 10)</span></label>
          <input id="empCoef" type="number" min="0" step="0.01" placeholder="ì—…ì¢…ë³„ ê°’ ì…ë ¥">
        </div>
        <div>
          <label for="etsPrice">ETS ê¸°ì¤€ê°€ (ì›/tCOâ‚‚) <span class="muted">(ê¸°ë³¸ 90,000)</span></label>
          <input id="etsPrice" type="number" min="0" step="1" placeholder="ì˜ˆ: 90000">
        </div>
      </div>
      <div class="row" style="margin-top:12px;">
        <button id="calcBtn" type="button" class="btn">ê³„ì‚°í•˜ê¸°</button>
        <span class="muted">ë°°ì¶œëŸ‰ë§Œ ì…ë ¥í•´ë„ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤.</span>
      </div>
    </div>

    <!-- C. ê²°ê³¼ -->
    <div class="card">
      <div class="section-title">C. ê²°ê³¼</div>
      <div id="selSummary" style="margin-bottom:8px;">
        <span class="tag" id="tagType">ìœ í˜•: -</span>
        <span class="tag" id="tagChar">íŠ¹ì„±: -</span>
        <span class="tag" id="tagTreat">ì²˜ë¦¬: -</span>
        <span class="tag" id="tagYear">ë…„ë„: -</span>
      </div>
      <div class="row">
        <div>ğŸŒ <strong>ì˜¨ì‹¤ê°€ìŠ¤ ì ˆê°:</strong> <span id="outGHG" class="result">-</span> <span class="muted">kg COâ‚‚</span> <span class="muted">(IPCC ê³µì‹ EF)</span></div>
      </div>
      <div class="row">
        <div>ğŸ‘· <strong>ì¼ìë¦¬ ì°½ì¶œ:</strong> <span id="outJOB" class="result">-</span> <span class="muted">ëª…</span> <span class="muted">(IO ê³ ìš©ìœ ë°œê³„ìˆ˜)</span></div>
      </div>
      <div class="row">
        <div>ğŸŒ± <strong>í™˜ê²½ë³´ì „ ê°€ì¹˜:</strong> <span id="outVAL" class="result">-</span> <span class="muted">ì›</span> <span class="muted">(K-ETS ê¸°ì¤€ê°€)</span></div>
      </div>
      <div class="muted" style="margin-top:8px; line-height:1.6;">
        â€¢ EF(ë™ì•„ì‹œì•„ MSW í‰ê· ì¡°ì„± ê°€ì¤‘) = <span class="hl">0.207451 kgCOâ‚‚/kg</span> (= 0.207451 tCOâ‚‚/í†¤Â·ìŠµ).<br>
        â€¢ ì˜ë¯¸: íê¸°ë¬¼ ì„¸ë¶€ì¡°ì„±(í”Œë¼ìŠ¤í‹±, ì¢…ì´ ë“±)ì˜ ë°°ì¶œê³„ìˆ˜ë¥¼ ë™ì•„ì‹œì•„ í‰ê·  ì¡°ì„±ë¹„ë¡œ ê°€ì¤‘í‰ê· í•œ ë‹¨ì¼ EFì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì¡°ì„± ì…ë ¥ ì—†ì´ í‰ê· ê°’ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì¶”ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
    </div>

    <!-- D. ìˆœí™˜ìì›ì •ë³´ì„¼í„° ì•ˆë‚´ + ë‘ ë²„íŠ¼ -->
    <div class="card" id="recenterServices">
      <div class="section-title"><span>â™»ï¸</span><span>ì¬í™œìš© ì „í™˜ì„ ìœ„í•œ ìˆœí™˜ì •ë³´ì„¼í„° ì•ˆë‚´</span></div>
      <div class="row" style="flex-direction:column; align-items:stretch; gap:10px;">
        <a class="btn-wide" href="https://www.re.or.kr/circul/listPubCirculSup.do" target="_blank" rel="noopener">
          <span class="ico">â–¶</span><span>ìœ í†µì§€ì› ì‹ ì²­ ë°”ë¡œê°€ê¸°</span>
        </a>
        <a class="btn-wide" href="https://www.re.or.kr/info/listTrtmPage.do" target="_blank" rel="noopener">
          <span class="ico">â–¶</span><span>ì¬í™œìš© ì²˜ë¦¬ì—…ì²´ ì°¾ê¸°</span>
        </a>
      </div>
    </div>
  </div>

<script>
// --- ìƒìˆ˜/ì €ì¥í‚¤
const EF_MSW_EA_KGKG = 0.2074510533; // kgCO2/kg (ë™ì•„ì‹œì•„ MSW í‰ê· ì¡°ì„± ê°€ì¤‘ EF)
const LSKEY='levy_io_ets_defaults_v4';

// --- Dom helpers
const $ = (id)=> document.getElementById(id);
const num = (id)=> { const v=parseFloat(($(id)?.value)||''); return isFinite(v) ? v : 0; };

// --- ê¸°ë³¸ë…„ë„ ì…€ë ‰íŠ¸ ë°”ì¸ë”©
function fillYears(){
  const now = new Date().getFullYear();
  const s = $('disposalYear'); if(!s) return;
  s.innerHTML = '';
  for(let y = now+1; y >= 2018; y--){
    const op = document.createElement('option'); op.value = y; op.textContent = y + 'ë…„';
    s.appendChild(op);
  }
  s.value = String(now);
}

// --- ê¸°ë³¸ê°’ ë¡œë“œ/ì €ì¥
function loadDefaults(){
  try{
    const saved = JSON.parse(localStorage.getItem(LSKEY) || '{}');
    const defs = Object.assign({
      wasteType:'ì‚¬ì—…ì¥íê¸°ë¬¼',
      wasteChar:'ê°€ì—°ì„±',
      treatment:'ì†Œê°',
      disposalYear:String(new Date().getFullYear()),
      unitCostKRW:150000,
      empCoef:10,
      etsPrice:90000
    }, saved);
    ['wasteType','wasteChar','treatment','disposalYear','unitCostKRW','empCoef','etsPrice'].forEach(id=>{
      if($(id)){ $(id).value = defs[id]; }
    });
    if(saved.wasteAmount){ $('wasteAmount').value = saved.wasteAmount; }
  }catch(e){}
  toggleWasteChar();
  updateTags();
}
function saveDefaults(){
  try{
    const vals={};
    ['wasteType','wasteChar','treatment','disposalYear','unitCostKRW','empCoef','etsPrice'].forEach(id=> vals[id]=($(id)?.value)||'');
    vals.wasteAmount = num('wasteAmount');
    localStorage.setItem(LSKEY, JSON.stringify(vals));
  }catch(e){}
}

// --- UI helpers
function toggleWasteChar(){
  const wrap = $('wasteCharWrap');
  const show = ($('wasteType').value === 'ì‚¬ì—…ì¥íê¸°ë¬¼');
  wrap.style.display = show ? 'block' : 'none';
}
function updateTags(){
  $('tagType').textContent = 'ìœ í˜•: ' + ($('wasteType').value || '-');
  $('tagChar').style.display = ($('wasteType').value==='ì‚¬ì—…ì¥íê¸°ë¬¼') ? 'inline-block' : 'none';
  $('tagChar').textContent = 'íŠ¹ì„±: ' + ($('wasteChar').value || '-');
  $('tagTreat').textContent = 'ì²˜ë¦¬: ' + ($('treatment').value || '-');
  $('tagYear').textContent = 'ë…„ë„: ' + ($('disposalYear').value || '-');
}

// --- ê³„ì‚°
function calculate(){
  // í˜„ì¬ ë²„ì „: ì²˜ë¦¬ë°©ì‹Â·íŠ¹ì„± ë“±ì€ í‘œì‹œ/ì €ì¥ë§Œ í•˜ê³  EFëŠ” ë™ì¼(ì°¨ë“± EFëŠ” ì°¨ê¸° ë°˜ì˜)
  const kg = num('wasteAmount');
  const carbonReduction = Math.round(kg * EF_MSW_EA_KGKG * 1000) / 1000; // kg CO2
  const etsPrice = num('etsPrice'); // ì›/tCO2
  const recycleValue = (etsPrice>0) ? (carbonReduction/1000) * etsPrice : 0; // KRW
  const unitCost = num('unitCostKRW'); // ì›/í†¤
  const empCoef = num('empCoef'); // ëª…/10ì–µ
  const expenditure = (kg/1000) * unitCost; // KRW
  const jobCreation = (expenditure/1_000_000_000) * empCoef; // ëª…

  $('outGHG').textContent = isFinite(carbonReduction) ? carbonReduction.toLocaleString() : '-';
  $('outJOB').textContent = isFinite(jobCreation) ? jobCreation.toFixed(3) : '-';
  $('outVAL').textContent = isFinite(recycleValue) ? Math.round(recycleValue).toLocaleString() : '-';
}

// --- ì´ë²¤íŠ¸ ë°”ì¸ë”©
document.addEventListener('DOMContentLoaded', function(){
  fillYears();
  loadDefaults();
  ['wasteType','wasteChar','treatment','disposalYear','wasteAmount','unitCostKRW','empCoef','etsPrice'].forEach(id=>{
    const el=$(id); if(!el) return;
    ['input','change'].forEach(evt=> el.addEventListener(evt, ()=>{ toggleWasteChar(); updateTags(); saveDefaults(); calculate(); }));
  });
  const btn = $('calcBtn');
  if(btn){ btn.type='button'; btn.addEventListener('click', (e)=>{ e.preventDefault(); calculate(); }); }
  // ì´ˆê¸° ê³„ì‚°
  calculate();
});
</script>
</body>
</html>
